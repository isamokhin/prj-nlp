## Питально-відповідальна система на основі правил

Для бейзлайну проекту я вибрав варіант питально-відповідальої системи, заснований на правилах. У більшості систем, які працюють з фактологічними питаннями, так чи інакше присутні правила - ними можна покрити значну частину простих питань. Тому це здалось логічним початковим кроком. Також поки що працюють тільки питання географічної тематики - ті, які стосуються фактів щодо країн, міст, річок, морів тощо.

На сьогодні система складається з таких компонентів:

- парсер бази знань;
- парсер тексту питання;
- функція звірки тексту з поширеними паттернами питань;
- функція "перекладу" елементів питання у запити;
- функція, яка здійснює SPARQL-запити до бази знань;
- "перекладач" відповіді на українську мову.

Усі компоненти, крім першого, зібрані докупи у класі Question.

Запити здійснюються у базу знань, створену на основі доступних на сайті DBPedia "трійок", витягнутих із інфобоксів (карток) української вікіпедії. Файл було зменшено шляхом відбору тільки тих кількох десятків властивостей, які характерні для географічних об'єктів: розмір бази зменшився з 2,5 Гб до 185 Мб (9 Мб у gzip-файлі). На початку роботи з системою файл парситься бібліотекою rdflib для подальшого здійснення запитів. Цей процес наразі займає більше 2 хвилин, але це відбувається один раз і після цього можна ставити скільки завгодно питань і дуже швидко отримувати відповідь.

```
python geo_qa_project.py 
Зачекайте, будь ласка, триває завантаження бази знань!

...Базу завантажено!
Будь ласка, ставте географічні запитання.
(щоб завершити роботу, введіть exit)

Яка площа України?
Відповідь на запитання:
Площа України - 603628 км²

Яка довжина Дніпра? 
Відповідь на запитання:
Довжина Дніпра - 2201 кілометрів

exit
Завершення роботи.
```

Поточні проблеми системи:

- якість даних. Якість самої української вікіпедії під питанням, і витягнуті з неї "трійки" ніхто не вичитував, звісно;
- POS-теггінг для української мови. Я використав pymorphy2, який не зважає на контекст слова;
- NER для української мови. Я використав просту евристику (грубо кажучи, слова з великої літери), але думаю про те, щоб натренувати для цього проекту domain-specific NER tagger;
- disambiguation - багато географічних назв стосується кількох сутностей, і в мене поки нема механізму розрізнення;
- правил поки небагато і вони на основі невеликої кількості тренувальних запитань, тому якість системи на тестових питаннях (див. далі) низька. Але "архітектура" система дозволяє додавати далі правила і покращувати якість. Поки що я зосереджувався на тому, щоб система просто стала робочою (хоч і неточною). Для отримання відповідей, поки що є сенс ставити питання у простій формі у називному відмінку.

Для тестування системи я попросив свою дівчину поставити питання до інфобоксів кількох різних географічних об'єктів (країна, місто, річка, море, гора, озеро), а потім випадковим чином замінив початкові об'єкти, яких стосувались питання, на інші об'єкти того ж типу (замість Варшави, про яку ставились питання, у тестових питаннях присутні Монтевідео, Рим тощо). Мінус цього підходу в тому, що не всі інфобокси містять ту саму інформацію, як ті інфобокси, яких стосувались початкові питання. Тим не менш, я отримав 128 тестових питань, на які система не дуже вдало спробувала відповісти: тільки у 7 випадках система дала правильну відповідь (точність 5,5%). Тестові питання можна подивитись у файлі test_questions.txt.

